:HEADER:
# -*- mode: org; -*-
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
#+HTML_HEAD: <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
#+HTML_HEAD: <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
#+HTML_HEAD: <script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
#+HTML_HEAD: <script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
#+HTML_HEAD: <style>pre.src {background-color: #303030; color: #e5e5e5;}</style>
#+OPTIONS: ':nil *:t -:t ::t <:t H:3 \n:t ^:{} arch:headline
#+OPTIONS: author:t c:nil creator:nil d:(not "LOGBOOK") date:t e:t
#+OPTIONS: email:nil f:t inline:t num:t p:nil pri:nil prop:nil stat:t
#+OPTIONS: tags:t tasks:t tex:t timestamp:t title:t toc:t todo:t |:t

#+TITLE: Resource Planner
#+AUTHOR: Stefan Bramer
#+EMAIL: sbramer@intera.com
:END:

* Introduction
- Simple lightweight resource planner and skills matrix for EU staff
** General
- DB of employees
- add new employees/people
- open to all, loo at anyone, no restrictions
- summary view, per office?
** Tabs
*** Overview/Summary/Dashboard
*** Projects/Hours/Time Planner
*** Skills Matrix
* Flow chart
#+BEGIN_SRC mermaid :file img/full.svg :results file link
flowchart TD
    A[App Launch: main.py] --> B[Load employees.csv]
    B --> C[Employee Selection via Dropdown]
    C --> D{Employee Selected?}

    D -- Yes --> E[Load entries.csv]
    E --> F[Filter entries for selected employee]
    F --> G[Create Employee Object]
    G --> H[Populate Confirmed, Tentative, Leave data_editors]

    H --> I[User Edits Weekly Hours]

    I --> J["User presses 'Save All Entries'"]
    J --> K["Employee.save_entries()"]
    K --> L[Load full entries.csv]
    L --> M[Remove old entries for current employee]
    M --> N[Append updated entries]
    N --> O[Save entries.csv]

    D -- No --> P[Prompt to Add New Employee]
    P --> Q[Enter Name]
    Q --> R[Append to employees.csv]
    R --> S[Initialize Default Leave Rows]
    S --> T[Append Default Leave Rows to entries.csv]
    T --> U[Reload and Rerun App]
    U --> C
#+END_SRC
* Deployment
- Docker image on local server Max will provide
* TODO Outstanding  [0/7]
- [ ] user needs to be able to change which weeks to view
- [ ] understand caching data and session.state data
  - e.g. current employee name should be in session.state data so you stick with it during reloads
  - database can be loaded into cache once than reused, not sure though, gets confusing
  - careful when changing data all session/cache data needs updating to have the latest
- [ ] log user entries and save current db in background - AVOID DATA LOSS
- [ ] add input validation (e.g., no negative hours, cap at 40h/week)
- [ ] allow deletion of rows/projects
- [ ] exporting to Excel or PDF reports.
- [ ] Sync with Google Sheets or a cloud database for multi-user setups?
